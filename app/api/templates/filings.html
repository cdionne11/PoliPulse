{% extends "base.html" %}

{% block title %}
    Filings Data
{% endblock %}

{% block content %}
    <div class="container">
        <nav aria-label="Page navigation top" class="my-4">
            <ul class="pagination justify-content-center">
                {% if page > 1 %}
                    <li class="page-item">
                        <a class="page-link" href="{{ url_for('get_filings', page=page-1, filing_year=filing_year) }}"
                           aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                {% endif %}

                <li class="page-item disabled">
                    <span class="page-link">Page {{ page }}</span>
                </li>

                {% if page * per_page < total_data %}
                    <li class="page-item">
                        <a class="page-link" href="{{ url_for('get_filings', page=page+1, filing_year=filing_year) }}"
                           aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                {% endif %}
            </ul>
        </nav>
        <h1 class="my-4">Filings Data</h1>
        <ul class="list-group">
            {% for item in data %}
                <div>
                    <p>Filing URL: <a href="{{ item.url }}">{{ item.url }}</a></p>
                    <p>Filing UUID: {{ item.filing_uuid }}</p>
                    <p>Filing Type: {{ item.filing_type }}</p>
                    <p>Filing Type Display: {{ item.filing_type_display }}</p>
                    <p>Filing Year: {{ item.filing_year }}</p>
                    <p>Filing Period: {{ item.filing_period }}</p>
                    <p>Filing Period Display: {{ item.filing_period_display }}</p>
                    <p>Filing Document URL: <a href="{{ item.filing_document_url }}">{{ item.filing_document_url }}</a>
                    </p>
                    <p>Registrant Name: {{ item.registrant.name }}</p>
                    <p>Registrant
                        Address: {{ item.registrant.address_1 }}, {{ item.registrant.city }}, {{ item.registrant.state_display }}, {{ item.registrant.zip }}</p>
                    <p>Client Name: {{ item.client.name }}</p>
                    <p>Client State: {{ item.client.state_display }}</p>
                    <p>Lobbying Activities:</p>
                    <ul>
                        {% for activity in item.lobbying_activities %}
                            <li>General Issue Code: {{ activity.general_issue_code }}</li>
                            <li>Government Entities:</li>
                            <ul>
                                {% for entity in activity.government_entities %}
                                    <li>{{ entity.name }}</li>
                                {% endfor %}
                            </ul>
                        {% endfor %}
                    </ul>
                </div>
                <hr>
            {% endfor %}

        </ul>
        <nav aria-label="Page navigation top" class="my-4">
            <ul class="pagination justify-content-center">
                {% if page > 1 %}
                    <li class="page-item">
                        <a class="page-link" href="{{ url_for('get_filings', page=page-1, filing_year=filing_year) }}"
                           aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                {% endif %}

                <li class="page-item disabled">
                    <span class="page-link">Page {{ page }}</span>
                </li>

                {% if page * per_page < total_data %}
                    <li class="page-item">
                        <a class="page-link" href="{{ url_for('get_filings', page=page+1, filing_year=filing_year) }}"
                           aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                {% endif %}
            </ul>
        </nav>
    </div>
{% endblock %}
